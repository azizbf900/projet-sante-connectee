<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.text.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.effect.*?>
<?import javafx.collections.FXCollections?>
<?import java.lang.String?>

<AnchorPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="controllers.ListProduit"
            prefHeight="700.0" prefWidth="1000.0"
            styleClass="root-container"
            stylesheets="/styles/styles.css">

   <!-- Header -->
   <VBox AnchorPane.topAnchor="0.0"
         AnchorPane.leftAnchor="0.0"
         AnchorPane.rightAnchor="0.0"
         spacing="15"
         styleClass="header-container">
      <padding>
         <Insets top="20" right="30" bottom="20" left="30"/>
      </padding>

      <!-- Titre principal -->
      <HBox alignment="CENTER_LEFT" spacing="15">
         <Label text="Gestion des Produits" styleClass="main-title">
            <font>
               <Font name="System Bold" size="24.0"/>
            </font>
         </Label>
      </HBox>

      <!-- Barre d'outils -->
      <HBox spacing="20" alignment="CENTER_LEFT">
         <!-- Barre de recherche -->
         <HBox alignment="CENTER_LEFT" spacing="10" styleClass="search-container">
            <TextField fx:id="searchField"
                       promptText="Rechercher un produit..."
                       prefWidth="300"
                       styleClass="search-field"/>
         </HBox>

         <!-- Filtres -->
         <ComboBox fx:id="categoryFilter"
                   promptText="Toutes les catégories"
                   prefWidth="180"
                   styleClass="filter-combo"/>

         <ComboBox fx:id="statusFilter"
                   promptText="Statut"
                   prefWidth="120"
                   styleClass="filter-combo"/>

         <Region HBox.hgrow="ALWAYS"/>

         <!-- Boutons d'action -->
         <Button fx:id="refreshButton"
                 text="Rafraîchir"
                 styleClass="action-button secondary"/>

         <Button fx:id="addProductButton"
                 text="Ajouter un produit"
                 styleClass="action-button primary"/>
      </HBox>

      <!-- Statistiques -->
      <HBox spacing="30" alignment="CENTER_LEFT" styleClass="stats-container">
         <VBox alignment="CENTER_LEFT" styleClass="stat-item">
            <Label fx:id="totalProductsLabel" text="153" styleClass="stat-value"/>
            <Label text="Total produits" styleClass="stat-label"/>
         </VBox>
         <VBox alignment="CENTER_LEFT" styleClass="stat-item">
            <Label fx:id="lowStockLabel" text="12" styleClass="stat-value warning"/>
            <Label text="Stock faible" styleClass="stat-label"/>
         </VBox>
         <VBox alignment="CENTER_LEFT" styleClass="stat-item">
            <Label fx:id="outOfStockLabel" text="3" styleClass="stat-value danger"/>
            <Label text="Rupture" styleClass="stat-label"/>
         </VBox>
         <VBox alignment="CENTER_LEFT" styleClass="stat-item">
            <Label fx:id="totalValueLabel" text="15,435€" styleClass="stat-value success"/>
            <Label text="Valeur totale" styleClass="stat-label"/>
         </VBox>
      </HBox>
   </VBox>

   <!-- Table des produits -->
   <TableView fx:id="productTable"
              AnchorPane.topAnchor="180.0"
              AnchorPane.leftAnchor="30.0"
              AnchorPane.rightAnchor="30.0"
              AnchorPane.bottomAnchor="70.0"
              styleClass="product-table">
      <placeholder>
         <VBox alignment="CENTER" spacing="10" styleClass="empty-state">
            <Label text="Aucun produit trouvé" styleClass="empty-state-title">
               <font>
                  <Font size="16.0"/>
               </font>
            </Label>
            <Label text="Ajoutez un nouveau produit pour commencer" styleClass="empty-state-text"/>
         </VBox>
      </placeholder>

      <columns>
         <TableColumn fx:id="idColumn" text="ID" prefWidth="60" sortable="true"/>
         <TableColumn fx:id="nameColumn" text="Nom" prefWidth="200" sortable="true"/>
         <TableColumn fx:id="descriptionColumn" text="Description" prefWidth="250"/>
         <TableColumn fx:id="categoryColumn" text="Catégorie" prefWidth="120" sortable="true"/>
         <TableColumn fx:id="priceColumn" text="Prix" prefWidth="100" sortable="true" style="-fx-alignment: CENTER-RIGHT;"/>
         <TableColumn fx:id="quantityColumn" text="Quantité" prefWidth="100" sortable="true" style="-fx-alignment: CENTER;"/>
         <TableColumn fx:id="statusColumn" text="Statut" prefWidth="100" style="-fx-alignment: CENTER;"/>
         <TableColumn fx:id="actionsColumn" text="Actions" prefWidth="150" style="-fx-alignment: CENTER;"/>
      </columns>

      <columnResizePolicy>
         <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
      </columnResizePolicy>
   </TableView>

   <!-- Footer avec pagination -->
   <HBox alignment="CENTER"
         spacing="20"
         AnchorPane.bottomAnchor="0.0"
         AnchorPane.leftAnchor="0.0"
         AnchorPane.rightAnchor="0.0"
         styleClass="footer-container">
      <padding>
         <Insets top="15" right="30" bottom="15" left="30"/>
      </padding>

      <!-- Actions groupées -->
      <HBox spacing="10" alignment="CENTER_LEFT" HBox.hgrow="ALWAYS">
         <Label fx:id="selectedItemsLabel" text="0 élément(s) sélectionné(s)" styleClass="selected-items-label"/>
         <Button fx:id="deleteSelectedButton"
                 text="Supprimer"
                 disable="true"
                 styleClass="action-button danger"/>
      </HBox>

      <!-- Pagination -->
      <HBox spacing="10" alignment="CENTER">
         <Button fx:id="firstPageButton" text="«" styleClass="pagination-button"/>
         <Button fx:id="previousPageButton" text="‹" styleClass="pagination-button"/>
         <Label fx:id="pageInfoLabel" text="Page 1 sur 10" styleClass="page-info"/>
         <Button fx:id="nextPageButton" text="›" styleClass="pagination-button"/>
         <Button fx:id="lastPageButton" text="»" styleClass="pagination-button"/>
      </HBox>

      <!-- Nombre d'éléments par page -->
      <ComboBox fx:id="itemsPerPageCombo"
                prefWidth="100"
                styleClass="items-per-page"
                value="10 par page">
         <items>
            <FXCollections fx:factory="observableArrayList">
               <String fx:value="10 par page"/>
               <String fx:value="25 par page"/>
               <String fx:value="50 par page"/>
               <String fx:value="100 par page"/>
            </FXCollections>
         </items>
      </ComboBox>
   </HBox>

   <!-- Overlay de chargement -->
   <StackPane fx:id="loadingOverlay"
              AnchorPane.topAnchor="0.0"
              AnchorPane.leftAnchor="0.0"
              AnchorPane.rightAnchor="0.0"
              AnchorPane.bottomAnchor="0.0"
              visible="false"
              styleClass="loading-overlay">
      <VBox alignment="CENTER" spacing="10">
         <ProgressIndicator/>
         <Label text="Chargement en cours..." styleClass="loading-text"/>
      </VBox>
   </StackPane>

   <!-- Notification toast -->
   <VBox fx:id="notificationArea"
         AnchorPane.topAnchor="10.0"
         AnchorPane.rightAnchor="10.0"
         spacing="10"
         styleClass="notification-area">
   </VBox>
</AnchorPane>